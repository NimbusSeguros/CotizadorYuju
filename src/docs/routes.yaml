openapi: 3.0.0
info:
  title: API Gateway - Aseguradora
  version: 1.0.0
  description: API para obtener cotizaciones de seguros.

servers:
  - url: http://localhost:3000
    description: Servidor Local

paths:
  /api/datos:
    get:
      summary: Obtener datos de aseguradoras
      description: Retorna información de aseguradoras en un formato estandarizado.
      responses:
        "200":
          description: Datos de las aseguradoras
          content:
            application/json:
              schema:
                type: object
                properties:
                  source1:
                    type: object
                  source2:
                    type: object
        "500":
          description: Error interno del servidor

  /api/jwt-data:
    get:
      summary: Obtener datos protegidos con JWT
      description: Retorna datos desde una API externa que requiere autenticación JWT.
      responses:
        "200":
          description: Datos obtenidos con autenticación JWT
          content:
            application/json:
              schema:
                type: object
        "401":
          description: No autorizado
        "500":
          description: Error interno del servidor

  /api/cotizacion/auto:
    post:
      summary: Obtener cotización de RUS Seguros
      description: Solicita una cotización para un vehículo en RUS Seguros.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marca:
                  type: string
                  example: "Toyota"
                modelo:
                  type: string
                  example: "Corolla"
                anio:
                  type: integer
                  example: 2023
                tipo:
                  type: string
                  example: "particular"
      responses:
        "200":
          description: Cotización obtenida con éxito
          content:
            application/json:
              schema:
                type: object
        "500":
          description: Error interno del servidor

  /api/mercantil-andina/cotizacion-auto:
    post:
      summary: Obtener cotización de Mercantil Andina
      description: Solicita una cotización para un vehículo en Mercantil Andina.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sucursal:
                  type: string
                  example: "123"
                productor:
                  type: string
                  example: "456"
                tomador:
                  type: object
                  properties:
                    tipoDocumento:
                      type: string
                      example: "DNI"
                    numeroDocumento:
                      type: string
                      example: "30123456"
                    apellido:
                      type: string
                      example: "Pérez"
                    nombre:
                      type: string
                      example: "Juan"
                    email:
                      type: string
                      example: "juan.perez@example.com"
                    telefono:
                      type: string
                      example: "1122334455"
                vehiculo:
                  type: object
                  properties:
                    anio:
                      type: integer
                      example: 2023
                    marca:
                      type: string
                      example: "Toyota"
                    modelo:
                      type: string
                      example: "Corolla"
                    version:
                      type: string
                      example: "XEI"
                    uso:
                      type: string
                      example: "particular"
      responses:
        "200":
          description: Cotización obtenida con éxito
          content:
            application/json:
              schema:
                type: object
        "500":
          description: Error interno del servidor

  /api/san-cristobal/cotizacion-auto:
    post:
      summary: Obtener cotización de San Cristóbal Seguros
      description: Solicita una cotización para un vehículo en San Cristóbal Seguros.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marca:
                  type: string
                  example: "Toyota"
                modelo:
                  type: string
                  example: "Corolla"
                anio:
                  type: integer
                  example: 2023
                uso:
                  type: string
                  example: "particular"
                sumaAsegurada:
                  type: number
                  example: 2000000
                tipoCobertura:
                  type: string
                  example: "total"
                datosTomador:
                  type: object
                  properties:
                    tipoDocumento:
                      type: string
                      example: "DNI"
                    numeroDocumento:
                      type: string
                      example: "30123456"
                    nombre:
                      type: string
                      example: "Juan"
                    apellido:
                      type: string
                      example: "Pérez"
                    email:
                      type: string
                      example: "juan.perez@example.com"
                    telefono:
                      type: string
                      example: "1122334455"
      responses:
        "200":
          description: Cotización obtenida con éxito
          content:
            application/json:
              schema:
                type: object
        "500":
          description: Error interno del servidor


  /api/cotizacion-auto/unificada:
    post:
      summary: Endpoint Unificador para Cotización
      description: Recibe datos sueltos y construye el objeto necesario antes de solicitar la cotización a Mercantil Andina.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sucursal:
                  type: string
                  example: "123"
                productor:
                  type: string
                  example: "456"
                tipoDocumento:
                  type: string
                  example: "DNI"
                numeroDocumento:
                  type: string
                  example: "30123456"
                apellido:
                  type: string
                  example: "Pérez"
                nombre:
                  type: string
                  example: "Juan"
                email:
                  type: string
                  example: "juan.perez@example.com"
                telefono:
                  type: string
                  example: "1122334455"
                anio:
                  type: integer
                  example: 2023
                marca:
                  type: string
                  example: "Toyota"
                modelo:
                  type: string
                  example: "Corolla"
                version:
                  type: string
                  example: "XEI"
                uso:
                  type: string
                  example: "particular"
      responses:
        "200":
          description: Cotización obtenida con éxito
          content:
            application/json:
              schema:
                type: object
        "500":
          description: Error interno del servidor
  
